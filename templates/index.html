<!DOCTYPE html>
<html>
<head>
    <title>AdFree Music Player</title>
</head>
<body>
<h2>AdFree Music Player</h2>
<input type="text" id="searchBox" placeholder="Search song">
<button onclick="searchSong()">Search</button>

<div id="playerDiv" style="margin-top:20px;">
    <audio id="player" controls></audio>
</div>

<h3>Suggestions</h3>
<div id="suggestions"></div>

<script>
async function searchSong() {
    const query = document.getElementById("searchBox").value;
    const res = await fetch(`https://adfree-proxy.onrender.com/search?q=${encodeURIComponent(query)}`);
    const data = await res.json();
    
    const suggestionsDiv = document.getElementById("suggestions");
    suggestionsDiv.innerHTML = "";
    
    if(data.length > 0){
        document.getElementById("player").src = data[0].url;
        data.forEach(item => {
            const div = document.createElement("div");
            div.innerHTML = `<a href="#" onclick="playSong('${item.url}')">${item.title}</a>`;
            suggestionsDiv.appendChild(div);
        });
    } else {
        suggestionsDiv.innerHTML = "No songs found.";
    }
}

function playSong(url){
    const player = document.getElementById("player");
    player.src = url;
    player.play();
}
</script>
</body>
</html>
